<!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel1">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="cover">
  <div class="container">
    <h1 align="center" style="padding-bottom: 20px">List Task</h1>
    <div class="d-flex justify-content-between">
      <a data-bs-toggle="modal" data-bs-target="#exampleModal" style="margin-bottom: 10px" class="btn btn-primary" style="margin-bottom: 10px"
         href="#">Create new Task</a>

      <!-- Button trigger modal -->
      <button style="margin-bottom: 10px" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal1">
        <i class='fas fa-filter' ></i>
      </button>
    </div>

    <div class="row">
      <div class="col-4">
        <div class="parent">
          <div class="card bg-custom">
            <h3>Main Task</h3>
            <div class="card-body height">
              <div class="task" *ngFor="let task of taskList">
                <div (click)="getById(task?.id)" class="d-flex justify-content-between">
                  <div class="font">[{{task.name}}]</div>
                  <div>
                    <i routerLink="/update/{{task.id}}" class="material-icons" style="color: green">create</i>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i routerLink="/detail/{{task.id}}" class="material-icons">date_range</i>
                    </div>
                    <div>{{task.date}}</div>
                  </div>
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i class="material-icons">date_range</i>
                    </div>
                    <div>{{task.end}}</div>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div><b>Label:</b> {{task.label?.name}}</div>
                  </div>
                </div>
                <div style="padding-top: 5px"><b>Project:</b> {{task.projectId}}</div>
                <div class="row" style="padding-top: 5px">
                  <div class="col-8">
                    <span class="pt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" [style.width.%]="task.progress"
                           aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{task.progress}}%</div>
                    </div>
                    </span>
                  </div>
                  <div class="col-4">
                    <div class="d-flex justify-content-between">
                      <div></div>
                      <i (click)="delete(task.id)" class="material-icons" style="color: red">delete</i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4">
        <div class="children-doing">
          <div class="card bg-custom">
            <h3>Sub Task Doing</h3>
            <div class="card-body height">
              <div class="task" *ngFor="let task of doingTask">
                <div class="d-flex justify-content-between">
                  <div class="font">[{{task.name}}]</div>
                  <div>
                    <i routerLink="/update/{{task.id}}" class="material-icons" style="color: green">create</i>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i class="material-icons">date_range</i>
                    </div>
                    <div>{{task.date}}</div>
                  </div>
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i class="material-icons">date_range</i>
                    </div>
                    <div>{{task.end}}</div>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div><b>Label:</b> {{task.label?.name}}</div>
                  </div>
                </div>
                <div style="padding-top: 5px"><b>Project:</b> {{task.project?.name}}</div>
                <div class="row" style="padding-top: 5px">
                  <div class="col-8">
                    <span class="pt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" [style.width.%]="task.progress"
                           aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{task.progress}}%</div>
                    </div>
                    </span>
                  </div>
                  <div class="col-4">
                    <div class="d-flex justify-content-between">
                      <div></div>
                      <i (click)="delete(task.id)" class="material-icons" style="color: red">delete</i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4">
        <div class="children-done">
          <div class="card bg-custom">
            <h3>Sub Task Done</h3>
            <div class="card-body height">
              <div class="task" *ngFor="let task of doneTask">
                <div class="d-flex justify-content-between">
                  <div class="font">[{{task.name}}]</div>
                  <div>
                    <i routerLink="/update/{{task.id}}" class="material-icons" style="color: green">create</i>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i class="material-icons">date_range</i>
                    </div>
                    <div>{{task.date}}</div>
                  </div>
                  <div class="d-flex">
                    <div style="padding-right: 10px">
                      <i class="material-icons">date_range</i>
                    </div>
                    <div>{{task.end}}</div>
                  </div>
                </div>
                <div class="d-flex justify-content-between" style="padding-top: 5px">
                  <div class="d-flex">
                    <div><b>Label:</b> {{task.label?.name}}</div>
                  </div>
                </div>
                <div style="padding-top: 5px"><b>Project:</b> {{task.project?.name}}</div>
                <div class="row" style="padding-top: 5px">
                  <div class="col-8">
                    <span class="pt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" [style.width.%]="task.progress"
                           aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{task.progress}}%</div>
                    </div>
                    </span>
                  </div>
                  <div class="col-4">
                    <div class="d-flex justify-content-between">
                      <div></div>
                      <i (click)="delete(task.id)" class="material-icons" style="color: red">delete</i>
                    </div>

                  </div>

                </div>

              </div>

            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create Task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form [formGroup]="formValue">
        <div class="modal-body">
          <div class="card-body height">
            <div class="task">
              <div style="padding-top: 10px">
                <input formControlName="name" class="form-control" type="text" placeholder="Name">
              </div>
              <div style="padding-top: 10px">
                <input formControlName="date" class="form-control" type="date" placeholder="Date">
                <p *ngIf="checkTime" style="color: red">Start time cannot be less than end time</p>
              </div>
              <div style="padding-top: 10px">
                <input formControlName="end" class="form-control" type="date" placeholder="End">
                <p *ngIf="checkTime" style="color: red">Start time cannot be less than end time</p>
              </div>
              <div style="padding-top: 10px">
                <input disabled formControlName="progress" class="form-control" type="text" placeholder="progress">
              </div>
              <div style="padding-top: 10px">
                <select
                  formControlName="project" class="form-control" id="project">
                  <option disabled selected value="">Project</option>
                  <option *ngFor="let project of projectList"
                          [ngValue]="project">{{project.name}}
                  </option>
                </select>
              </div>

            </div>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" (click)="create()">Save</button>
        </div>
      </form>
    </div>

  </div>
</div>
